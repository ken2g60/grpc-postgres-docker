syntax = "proto3"; 

import "validate/validate.proto";
option go_package = "/proto/gen;mainapi";

package main;


service WalletService {
    rpc Balance (WalletIdRequest) returns (WalletResponse);
    rpc Deposit (DepositRequest) returns (DepositResponse);
    rpc Withdrawl (WithdrawlRequest) returns (WithdrawlResponse);
    rpc TransactionHistory(TransactionRequest) returns (TransactionHistoryResponse);
}

message TransactionRequest {}

enum PaymentMethod {
  CARD_PAYMENT = 0;
  MOBILE_MONEY = 1;
  BANK_TRANSFER = 2;
}

message TransactionRepeatedResponse {
    string user_id = 1;
    float amount = 2;
    string description = 3;
    string payment_method = 4;
}

message TransactionHistoryResponse {
    repeated TransactionRepeatedResponse responses = 1;
}

message WalletIdRequest {}

message WalletResponse {
    float balance = 1;
}

message DepositRequest {
    float amount = 1 [(validate.rules).float = {gte: 0}];
    PaymentMethod payment_method = 2 [(validate.rules).enum = {defined_only: true}];
    string description = 3 [(validate.rules).string = {min_len: 1, max_len: 255}];
}

message DepositResponse {
    float amount = 1;
    string description = 2;
}

message  WithdrawlRequest{
    float amount = 1 [(validate.rules).float = {gte: 0}];
    string description = 2 [(validate.rules).string = {min_len: 1, max_len: 255}];
}

message WithdrawlResponse {
    float amount = 1;
    float current_balance = 2;
    string description = 3;
}